<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <title>{{i18n:editor}}</title>
    <meta charset="UTF-8"/>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100&subset=latin,cyrillic' rel='stylesheet' type='text/css'>
    <!-- style:css -->
    <!-- endinject -->
    <!--build:remove-->
    <!--<link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet"/>-->
    <!--<link href="lib/bootstrap/css/colorpicker.css" rel="stylesheet"/>-->
    <link href="css/common.css" rel="stylesheet"/>
    <link href="controls/css/style.css" rel="stylesheet"/>
    <link href="css/editor.css" rel="stylesheet"/>
    <link href="css/charts.css" rel="stylesheet"/>
    <!--endbuild-->
    <meta property="og:url" content="http://testix.me" />
    <!--ga-->
    <!--fbpixel-->
    <!--fbviewcontent-->
</head>
<body ng-app="procoApp" class="editor">
    <div id="id-editor_view" class="scr" style="display:none;">
        <div class="top">
            <div class="top_toolbar">
                <div class="toolbar_left">
                    <a class="logo ml24" href="index.html"></a>
                    <span class="logo_beta"></span>
                    <div class="delimeter"></div>
                    <div class="top_proj_name"><input class="top_proj_input js-proj_name" placeholder="Введите имя проекта"/></div>
                </div>
                <div class="toolbar_right">
                    <span id="id-app_prevew_img_wr" class="tico mt2" style="display:none">
                        <i class="tico_img i_eye" style="position:relative;">
                            <div class="file_input_wr">
                            <input id="id-app_preview_img" class="file_input" type="file" accept="image/jpg"/>
                            </div>
                            <img src="i/add-slide-big.png"/>
                        </i>
                    </span>
                    <span class="tico js-app_save_template mt2"><i class="tico_img i_eye"><img src="i/save.png"/></i><span class="pts_string pts_save_template">{{i18n:save_template}}</span></span>
                    <div class="delimeter mt6"></div>
                    <span class="tico js-app_preview mt2">
                        <i class="tico_img"><img src="i/i_eye.png"/></i><span class="pts_string pts_preview">{{i18n:preview}}</span>
                    </span>
                    <span class="pbtn __blue __small ml24 js-app_publish">
                        <i class="tico_img"><img src="i/publish.png"/></i><span class="pts_string pts_publish">{{i18n:publish}}</span>
                    </span>
                    <div id="id-user_toolbar" class="toolbar_user ml12">
                        <!--<div style="display:none" class="user_avatar js-profile_picture"></div>-->
                        <div style="display:none" class="user_name js-user_name"></div>
                        <span style="display:none" class="pbtn __blue __small mt4 js-show_login pts_string pts_sign_in">{{i18n:sign_in}}</span>
                        <div style="display:none" class="dropdown_btn js-user_ctx_menu">
                            <div id="id-user_ctx_menu" style="display:none" class="ctx_menu_wr">
                                <div class="ctx_menu_item js-to_my_templates pts_string pts_my_projects">
                                    {{i18n:my_projects}}
                                </div>
                                <div class="ctx_menu_item js-change_password pts_string pts_change_password">
                                    {{i18n:change_password}}
                                </div>
                                <div class="ctx_menu_item js-logout pts_string pts_sign_out">
                                    {{i18n:sign_out}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="scr_wr">
            <div id="id-screen_controls_cnt" class="screen_controls_cnt">
                <div id="id-slides_cnt" class="slide_group_wr">
                    <!-- Сюда добавляются контролы Slide для переключения экранов -->
                    <!-- Используется шаблон для оформления групп, если нужно -->
                </div>
                <div class="tstx_arr js-slide_arr_left" style="display:none"></div>
                <div class="tstx_arr __right js-slide_arr_right" style="display:none"></div>
            </div>
            <div class="workspace_cnt">
                <div id="id-workspace" class="workspace">
                    <div id="id-product_wr" class="product_wr">
                        <div id="id-product_cnt" class="product_cnt">
                            <div id="id-control_cnt" class="quick_controls_cnt">
                                <!-- Здесь располагаются "быстрые" контролы, которые показываются поверх продукта при клике или наведении куда-то -->
                            </div>
                            <div id="id-product_iframe_cnt" class="workspace_screens_iframe">
                                <!-- Сюда загружаем mutapp приложение с помощью editorLoader -->
                            </div>
                        </div>
                        <div id="id-hor_scroll_left" class="hor_scroll" style="display:none"></div>
                        <div id="id-hor_scroll_right" class="hor_scroll __right" style="display:none"></div>
                    </div>
                </div>
                <div id="id-static-no_filter_controls" class="settings_panel js-setting_panel">
                    <!-- Контролы которые не фильтруются при клике на различные компоненты промки. Общие для всего продукта.  -->
                </div>
                <div id="id-static_controls_cnt" class="settings_panel __right js-setting_panel">
                    <!-- Сюда попадают контролы которые показываются постоянно -->
                </div>
            </div>
            <div id="id-share_previews_test" style="display:none;"></div>
        </div>
    </div>

    <div id="id-preview_view" style="display:none;height:100%;">
        <div class="top">
            <div class="top_toolbar">
                <div class="toolbar_left">
                    <a class="logo ml24" href="index.html"></a>
                    <span class="logo_beta"></span>
                </div>
                <div class="toolbar_right">
                    <div id="id-to_mob_preview" class="pre_mob mt2"></div>
                    <div id="id-to_desktop_preview" class="pre_desk ml12"></div>
                    <a class="pbtn __small js-back_to_editor ml16 pts_string pts_back">{{i18n:back}}</a>
                    <span class="pbtn __blue __small ml16 js-app_publish"><i class="tico_img"><img src="i/publish.png"/></i><span class="pts_string pts_publish">{{i18n:publish}}</span></span>
                </div>
            </div>
        </div>
        <div class="scr_wr">
            <div id="id-preview_background-image" class="published_proj_back">
                <div id="id-app_preview" class="proto_wr">
                    <!-- Сюда помещаем программно айфрейм для предпросмотра -->
                </div>
                <div class="social_btns_cnt">
                    <!-- TODO -->
                </div>
            </div>
        </div>
    </div>

    <div id="id-popup_controls" class="modal_cnt popup_cnt" style="display: none;">
        <div class="modal_wr">
            <div class="modal __800">
                <div id="id-popup_controls_cnt">
                    <!-- сюда добавляются контролы типа popup -->
                </div>
                <div class="close_dialog_btn __grey js-close"></div>
            </div>
        </div>
    </div>

    <div id="id-assistent" class="modal_cnt" style="display: none;">
        <div class="modal_wr">
            <div class="select_dialog_back">
                <div class="select_dialog_caption">
                    <span class="js-caption pts_string pts_hints">{{i18n:hints}}</span>
                </div>
                <div id="id-assistent_cnt" class="select_dialog_options_cnt">
                    <!-- сюда добавляется информация -->
                </div>
                <div class="select_dialog_button_cnt">
                    <span class="pbtn __white-gray js-cancel pts_string pts_cancel">{{i18n:cancel}}</span>
                    <span class="pbtn __blue js-continue pts_string pts_cont">{{i18n:cont}}</span>
                </div>
                <div class="close_dialog_btn __grey js-close"></div>
            </div>
        </div>
    </div>

    <div id="id-dialogs_view" class="modal_cnt" style="display: none;">
        <!-- для показа диалогов поверх остальных вью -->
    </div>

    <div id="id-modal_cnt" class="modal_cnt" style="display:none;">
        <!-- parent for modals -->
    </div>

    <div id="id-html_rasterization_cnt" class="proto_cnt __hidden">
        <iframe id="id-html_rasterization_iframe" src="rasterization_cnt.html" style="">
            <!-- iframe используется для изоляции стилей, чтобы сгенерировать превью -->
        </iframe>
    </div>

    <!-- Шаблон для группы Slide соответствующих группе экранов -->
    <script id="id-slide_group_template" type="text/template">
        <div class="slide_group">
            <div class="slide_group_label js-slide_group_name">
                <!---->
            </div>
            <div class="js-slides_cnt">
                <!-- Сюда вставляем контролы Slide -->
            </div>
            <div class="js-slide_group_controls">
                <!-- Какие то контролы для группы экранов, например добавление нового -->
            </div>
        </div>
    </script>

    <script id="id-static_control_cnt_template" type="text/template">
        <div class="control_cnt_wr">
            <p class="control_label js-label"></p>
            <div class="control_cnt js-control_cnt">

            </div>
        </div>
    </script>

    <!-- Шаблон для рамки выделения вокруг элемента -->
    <script id="id-elem_selection_template" type="text/template">
        <div class="js-selection selection_border">
            <div class="selection_border_bullit __1"></div>
            <div class="selection_border_bullit __2"></div>
            <div class="selection_border_bullit __3"></div>
            <div class="selection_border_bullit __4"></div>
        </div>
    </script>

    <!-- Шаблон для группы Slide соответствующх группе экранов -->
    <script id="id-select_dialog_template" type="text/template">
        <div class="modal_wr">
            <div class="select_dialog_back">
                <div class="select_dialog_caption">
                    <span class="js-caption pts_string pts_choose">{{i18n:choose}}</span>
                </div>
                <div class="loading_anim_wr js-loader" style="display:none;margin-top:50px;margin-bottom:250px;">
                    <div class="loading_anim"></div>
                </div>
                <div class="select_dialog_options_cnt js-options_cnt">
                    <!-- Сюда будут программно добавлять опции -->
                </div>
                <div class="select_dialog_button_cnt">
                    <span class="pbtn __white-gray js-cancel pts_string pts_cancel">{{i18n:cancel}}</span>
                    <span class="pbtn __blue js-confirm pts_string pts_select_dialog_ok">{{i18n:select_dialog_ok}}</span>
                </div>
            </div>
        </div>
    </script>

    <!-- шаблон элемента который вставляются в диалг выбора -->
    <script id="id-select_dialog_option_template" type="text/template">
        <div class="select_dialog_option js-option">
            <div class="select_dialog_option_thumb_cnt js-option_icon">
                <!-- Этому элементу надо указать backgroundImage -->
            </div>
            <div class="select_dialog_option_label">
                <span class="js-option_label">Картинка и текст</span>
            </div>
        </div>
    </script>

    <!-- шаблон элемента для аплоада файла который вставляются в диалг выбора -->
    <script id="id-fileChooser_option_template" type="text/template">
        <div class="select_dialog_option js-option">
            <div class="select_dialog_option_thumb_cnt __upload">
            </div>
            <div class="select_dialog_option_label">
                <span class="js-option_label"></span>
            </div>
            <div class="js-fileapi-wrapper file_input_wr">
                <input id="id-resource_manager_file_upload" class="file_input" type="file" accept="image/*"/>
            </div>
        </div>
    </script>

    <!-- Элемент для добавления в диалог проекта -->
    <script id="id-select_dialog_myproject_template" type="text/template">
        <div class="select_dialog_option js-option" style="display:block">
            <div class="select_dialog_option_label">
                <span class="js-option_label">имя проекта</span>
            </div>
        </div>
    </script>

    <!-- Подсказка, может указывать на различные элементы в редакторе или внутри промо проекта -->
    <script id="id-hint_template" type="text/template">
        <div class="hint">
            <span class="js-text"></span>
        </div>
    </script>

    <!-- Шаблон для диалога публикации -->
    <script id="id-publish_dialog_template" type="text/template">
    <div class="pd_wr">
        <div class="pd">
            <div class="pd_top">
                <p class="pd_header pts_string pts_proj_published">{{i18n:proj_published}}</p>
                <div class="pd_tab_switcher js-tab_btns">
                    <div class="pd_tab_btn js-tab_btn __selected" data-tab-id="1">
                        <div><span class="pd_icon_link"></span></div>
                        <div class="pts_string pts_proj_link">{{i18n:proj_link}}</div>
                    </div>
                    <div class="pd_tab_btn js-tab_btn" data-tab-id="2">
                        <div><span class="pd_icon_embed"></span></div>
                        <div class="pts_string pts_embed_code">{{i18n:embed_code}}</div>
                    </div>
                </div>
            </div>
            <div class="pd_tab_cnt js-tabs">
                <div class="pd_tab js-tab" data-tab-id="1">
                    <br><br>
                    <div>
                        <input id="id-copy_link_input" class="pd_link_input js-project_link" readonly="readonly" value="http://example.com"/>
                        <span class="pbtn __blue js-copy_link pts_string pts_copy" data-clipboard-target="#id-copy_link_input">{{i18n:copy}}</span>
                        <a href="#" target="_blank" class="pbtn js-view pts_string pts_show_proj">{{i18n:show_proj}}</a>
                    </div>
                    <!--<div class="pd_annotation_wr">-->
                        <!--<p class="pd_ann">Поделитесь вашим тестом в социальный сетях</p>-->
                        <!--<div class="pd_social_wr">-->
                            <!--<a href="#" class="social_btn __ok"></a>-->
                            <!--<a href="#" class="social_btn __vk ml12"></a>-->
                            <!--<a href="#" class="social_btn __fb ml12"></a>-->
                            <!--<a href="#" class="social_btn __twitter ml12"></a>-->
                        <!--</div>-->
                    <!--</div>-->
                </div>
                <div class="pd_tab js-tab" data-tab-id="2">
                    <br><br>
                    <div class="pd_col">
                        <textarea id="id-copy_embedcode_input" class="pd_embed_area js-embed_code" readonly="readonly"></textarea>
                    </div>
                    <div class="pd_col __w150">
                        <span class="pbtn __blue js-copy_embed_code pts_string pts_copy" data-clipboard-target="#id-copy_embedcode_input">{{i18n:copy}}</span>
                        <div class="pd_annotation_wr __b0">
                            <span class="tx pts_string pts_have_problems">{{i18n:have_problems}}</span>
                            <a href="mailto:info@testix.me" target="_top" class="link pts_string pts_contact_us">{{i18n:contact_us}}</a>
                        </div>
                    </div>
                    <p class="pd_small_header pts_string pts_use_alternaive_code">{{i18n:use_alternaive_code}}</p>
                    <div class="pd_col">
                        <textarea class="pd_embed_area js-embed_code_iframe" readonly="readonly"></textarea>
                    </div>
                    <div class="pd_col __w150">
                        <!-- пустой блок используется для выравнивания разметки -->
                    </div>
                    <!--<div class="pd_annotation_wr">-->
                        <!--<p class="pd_ann">Как вставить тест на сайт или в блог</p>-->
                    <!--</div>-->
                </div>
            </div>
            <div class="close_dialog_btn js-close"></div>
        </div>
    </div>
    </script>

    <!-- Шаблон для панельки быстрого редактирования, которая всплывает рядом с элементом и указывает на него -->
    <script id="id-quick_control_panel_template" type="text/template">
        <div class="qp js-quick_panel">
            <div class="qp_back js-items">

            </div>
            <div class="qp_triangle"></div>
        </div>
    </script>

    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.139.0.min.js"></script>
    <!-- commonlib:js -->
    <!-- endinject -->
    <!-- editorlib:js -->
    <!-- endinject -->
    <!-- common:js -->
    <!-- endinject -->
    <!-- editor:js -->
    <!-- endinject -->
    <!-- build:remove -->
    <script type="text/javascript" src="lib/aws-cognito-sdk.min.js"></script>
    <script type="text/javascript" src="lib/amazon-cognito-identity.min.js"></script>
    <script type="text/javascript" src="lib/jquery.js"></script>
    <script type="text/javascript" src="lib/jquery.js"></script>
    <script type="text/javascript" src="lib/html2canvas.js"></script>
    <script type="text/javascript" src="lib/FileAPI.min.js"></script>
    <script type="text/javascript" src="lib/rasterizeHTML.allinone.js"></script>
    <script type="text/javascript" src="lib/jpeg_encoder.js"></script>
    <script type="text/javascript" src="lib/clipboard.js"></script>
    <script type="text/javascript" src="lib/underscore.js"></script>
    <script type="text/javascript" src="lib/jscolor.js"></script>
    <script type="text/javascript" src="js/config.js"></script>
    <script type="text/javascript" src="js/model/app.js"></script>
    <script type="text/javascript" src="js/model/auth.js"></script>
    <script type="text/javascript" src="js/model/templates/template.js"></script>
    <script type="text/javascript" src="js/model/templates/templateCollection.js"></script>
    <script type="text/javascript" src="js/util/utils.js"></script>
    <script type="text/javascript" src="js/util/s3util.js"></script>
    <script type="text/javascript" src="js/util/queue.js"></script>
    <script type="text/javascript" src="js/util/previewService.js"></script>
    <script type="text/javascript" src="js/util/publisher.js"></script>
    <script type="text/javascript" src="js/util/fbPanoramaPublisher.js"></script>
    <script type="text/javascript" src="js/util/shareImagesService.js"></script>
    <script type="text/javascript" src="js/view/selectDialog.js"></script>
    <script type="text/javascript" src="js/view/publishDialog.js"></script>
    <script type="text/javascript" src="controls/DirectiveLoader.js"></script>
    <script type="text/javascript" src="controls/AbstractControl.js"></script>
    <script type="text/javascript" src="controls/TextQuickInput.js"></script>
    <script type="text/javascript" src="controls/ClickAndAddToArray.js"></script>
    <script type="text/javascript" src="controls/Slide.js"></script>
    <script type="text/javascript" src="controls/AddDictionaryElementControl.js"></script>
    <script type="text/javascript" src="controls/DeleteDictionaryElementControl.js"></script>
    <script type="text/javascript" src="controls/OnOff.js"></script>
    <script type="text/javascript" src="controls/StringControl.js"></script>
    <script type="text/javascript" src="controls/Drag.js"></script>
    <script type="text/javascript" src="controls/Alternative.js"></script>
    <script type="text/javascript" src="controls/SlideGroupControl.js"></script>
    <script type="text/javascript" src="controls/ChooseImage.js"></script>
    <script type="text/javascript" src="controls/ChooseSharingImage.js"></script>
    <script type="text/javascript" src="controls/custom/personality/personalityResultLinking.js"></script>
    <script type="text/javascript" src="controls/custom/trivia/triviaOptionPoints.js"></script>
    <script type="text/javascript" src="controls/custom/trivia/triviaTextFeedback.js"></script>
    <script type="text/javascript" src="controls/custom/fbPanorama/panoramaAddSticker.js"></script>
    <script type="text/javascript" src="js/hooks/hookRunner.js"></script>
    <script type="text/javascript" src="js/hooks/hookResultEvent.js"></script>
    <script type="text/javascript" src="js/view/modals/abstractModal.js"></script>
    <script type="text/javascript" src="js/view/modals/loadingModal.js"></script>
    <script type="text/javascript" src="js/view/modals/loginModal.js"></script>
    <script type="text/javascript" src="js/view/modals/messageModal.js"></script>
    <script type="text/javascript" src="js/view/modals/previewShareImageModal.js"></script>
    <script type="text/javascript" src="js/view/modals/requestFBPublishPermissions.js"></script>
    <script type="text/javascript" src="js/view/modals/signupModal.js"></script>
    <script type="text/javascript" src="js/view/modals/signinModal.js"></script>
    <script type="text/javascript" src="js/view/modals/emailSentModal.js"></script>
    <script type="text/javascript" src="js/view/modals/changePasswordModal.js"></script>
    <script type="text/javascript" src="js/view/modals/restorePasswordModal.js"></script>
    <script type="text/javascript" src="js/view/modals/signup12_2017Modal.js"></script>
    <script type="text/javascript" src="js/view/modals/notif04_2018Modal.js"></script>
    <script type="text/javascript" src="js/view/modals/modal.js"></script>
    <script type="text/javascript" src="js/editorui/editorLoader.js"></script>
    <script type="text/javascript" src="js/editorui/screenManager.js"></script>
    <script type="text/javascript" src="js/editorui/controlManager.js"></script>
    <script type="text/javascript" src="js/editorui/workspace.js"></script>
    <script type="text/javascript" src="js/editorui/resourceManager.js"></script>
    <script type="text/javascript" src="js/editorui/quickControlPanel.js"></script>
    <script type="text/javascript" src="js/editorui/popupControlPanel.js"></script>
    <script type="text/javascript" src="js/editorui/editor.js"></script>
    <script type="text/javascript" src="js/editorui/inspector.js"></script>
    <script type="text/javascript" src="js/editorui/assistentPopup.js"></script>
    <script type="text/javascript" src="js/charts/TriviaResultChart.js"></script>
    <!-- endbuild -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        if (window.google) google.charts.load('current', {'packages':['corechart']});
    </script>
    <script>
        $(document).ready(function() {
            if (config.common.awsEnabled === true) {
                Auth.addEventCallback(function(event, data) {
                    switch (event) {
                        case Auth.EVENT_SIGNIN_SUCCESS: {
                            Editor.start();
                            break;
                        }
                        case Auth.EVENT_AUTO_SIGNIN_FAILED: {
                            Modal.showSignin({
                                canClose: false
                            });
                            break;
                        }
                    }
                });
                App.start();
            }
            else {
                App.start();
                Editor.start();
            }
            if (App.isMobile() === true) {
                // на мобе не запускаем редактор а показываем отдельный экран
                window.location.href = 'blockeditor.html';
            }
            else if (App.isEditorSupportedInBrowser() === false) {
                // проверяем что браузер поддерживает редактор
                window.location.href = 'browsernotsupported.html';
            }
        })
    </script>
    <!--fbtrackeditor-->
    <!--yametrika-->
</body>
</html>